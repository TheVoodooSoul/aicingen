"use strict";(()=>{var e={};e.id=601,e.ids=[601],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1976:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>R,patchFetch:()=>I,requestAsyncStorage:()=>E,routeModule:()=>l,serverHooks:()=>P,staticGenerationAsyncStorage:()=>_});var s={};r.r(s),r.d(s,{POST:()=>d,dynamic:()=>c});var o=r(921),a=r(7380),n=r(4185),i=r(3878),p=r(8231),u=r(6415);let c="force-dynamic";async function d(e){try{let{url:t}=await e.json(),r=await fetch(`${p.H.RUNPOD_ENDPOINT_URL}/upscale`,{method:"POST",headers:{Authorization:`Bearer ${p.H.RUNPOD_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({url:t})});if(!r.ok)throw await r.json();let s=await r.json();return i.NextResponse.json(s)}catch(e){return(0,u.dh)(e)}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/upscale/route",pathname:"/api/upscale",filename:"route",bundlePath:"app/api/upscale/route"},resolvedPagePath:"/home/ubuntu/CinematicAIGenerator/app/app/api/upscale/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:E,staticGenerationAsyncStorage:_,serverHooks:P}=l,R="/api/upscale/route";function I(){return(0,n.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:_})}},8231:(e,t,r)=>{r.d(t,{H:()=>s});let s={RUNPOD_API_KEY:process.env.RUNPOD_API_KEY,RUNPOD_ENDPOINT_URL:process.env.RUNPOD_ENDPOINT_URL,RUNPOD_WEBHOOK_URL:process.env.RUNPOD_WEBHOOK_URL,MAX_FILE_SIZE:10485760,ALLOWED_FILE_TYPES:["image/jpeg","image/png","image/gif","video/mp4"],POLL_INTERVAL:2e3,MAX_POLL_TIME:3e5}},6415:(e,t,r)=>{r.d(t,{D0:()=>n,MS:()=>o,dh:()=>i,s3:()=>a});var s=r(8231);class o extends Error{constructor(e,t=500,r="INTERNAL_SERVER_ERROR"){super(e),this.status=t,this.code=r,this.name="ApiError"}}let a=async e=>new Promise((t,r)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>{t(s.result.split(",")[1])},s.onerror=e=>r(e)}),n=e=>{if(e.size>s.H.MAX_FILE_SIZE)throw new o("File size exceeds limit",400,"FILE_TOO_LARGE");if(!s.H.ALLOWED_FILE_TYPES.includes(e.type))throw new o("File type not supported",400,"INVALID_FILE_TYPE")},i=e=>{if(console.error("RunPod API Error:",e),e.response?.status===429)throw new o("Rate limit exceeded",429,"RATE_LIMIT_EXCEEDED");if(e.response?.status===401)throw new o("Invalid API key",401,"INVALID_API_KEY");throw new o(e.message||"An error occurred while processing your request",e.response?.status||500)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[923,146],()=>r(1976));module.exports=s})();