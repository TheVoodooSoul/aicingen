(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3202:function(e,a,t){Promise.resolve().then(t.bind(t,8770))},8770:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return V}});var s=t(784),r=t(1960),i=t(1555),l=t(2827),n=t(8787),o=t(9568),d=t(3201),c=t(3298);function u(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,c.m6)((0,d.W)(a))}let m=l.fC;l.ZA;let p=l.B4,f=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(l.xz,{ref:a,className:u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...i,children:[r,(0,s.jsx)(l.JO,{asChild:!0,children:(0,s.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=l.xz.displayName;let x=r.forwardRef((e,a)=>{let{className:t,children:r,position:i="popper",...n}=e;return(0,s.jsx)(l.h_,{children:(0,s.jsx)(l.VY,{ref:a,className:u("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:(0,s.jsx)(l.l_,{className:u("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});x.displayName=l.VY.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.__,{ref:a,className:u("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.__.displayName;let h=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(l.ck,{ref:a,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(l.eT,{children:r})]})});h.displayName=l.ck.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.Z0,{ref:a,className:u("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.Z0.displayName;var g=t(8657);let v=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsxs)(g.fC,{ref:a,className:u("relative flex w-full touch-none select-none items-center",t),...r,children:[(0,s.jsx)(g.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(g.e6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(g.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});v.displayName=g.fC.displayName;var y=t(2310);let j=(0,t(664).j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),b=r.forwardRef((e,a)=>{let{className:t,variant:r,size:i,asChild:l=!1,...n}=e,o=l?y.g7:"button";return(0,s.jsx)(o,{className:u(j({variant:r,size:i,className:t})),ref:a,...n})});b.displayName="Button";var N=t(3366),w=t(8238),_=t(1672);function S(e){let{onFileSelect:a,accept:t="image/*, video/*"}=e,[i,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(null),d=(0,r.useRef)(null);return(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"relative border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-6 flex flex-col items-center justify-center min-h-[200px] bg-gray-50 dark:bg-gray-900",children:i?(0,s.jsxs)("div",{className:"relative w-full h-full",children:["image"===n?(0,s.jsx)(_.default,{src:i,alt:"Preview",className:"rounded-lg object-contain",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,s.jsx)("video",{src:i,className:"w-full h-full rounded-lg",controls:!0}),(0,s.jsx)(b,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{l(null),o(null),a(null),d.current&&(d.current.value="")},children:(0,s.jsx)(w.Z,{className:"w-4 h-4"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:d,type:"file",className:"hidden",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;a(s);let r=new FileReader;r.onloadend=()=>{l(r.result),o(s.type.startsWith("image/")?"image":"video")},r.readAsDataURL(s)},accept:t}),(0,s.jsxs)(b,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4"}),"Upload File"]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Drag and drop or click to upload"})]})})})}var E=t(9032),L=t(4607),C=t(559),O=t(1116);function k(e){let{result:a,resultType:t,isLoading:l,onUpscale:n,onInpaint:o,onEdit:d}=e,[c,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[f,x]=(0,r.useState)(!1),h=async()=>{u(!0);try{await n()}finally{u(!1)}},g=async()=>{p(!0);try{await o()}finally{p(!1)}},v=async()=>{x(!0);try{await d()}finally{x(!1)}};return!a||l?null:(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-lg p-6 border border-border shadow-lg space-y-4",children:[(0,s.jsx)("div",{className:"relative aspect-video w-full overflow-hidden rounded-lg",children:"image"===t?(0,s.jsx)(_.default,{src:a,alt:"Generated result",fill:!0,className:"object-contain",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}):(0,s.jsx)("video",{src:a,controls:!0,className:"w-full h-full"})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)(b,{onClick:h,disabled:c,className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"w-4 h-4"}),c?"Upscaling...":"Upscale"]}),(0,s.jsxs)(b,{onClick:g,disabled:m,variant:"secondary",className:"flex items-center gap-2",children:[(0,s.jsx)(L.Z,{className:"w-4 h-4"}),m?"Inpainting...":"Inpaint"]}),(0,s.jsxs)(b,{onClick:v,disabled:f,variant:"secondary",className:"flex items-center gap-2",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4"}),f?"Editing...":"Edit"]}),(0,s.jsxs)(b,{onClick:()=>{let e=document.createElement("a");e.href=a,e.download="forge-".concat(Date.now(),".").concat("video"===t?"mp4":"png"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(O.Z,{className:"w-4 h-4"}),"Download"]})]})]})}var A=t(2304);let R=[{id:"action_scenes_v1",name:"Action Scenes V1",description:"Optimized for dynamic action sequences"},{id:"martial_arts_v2",name:"Martial Arts V2",description:"Enhanced martial arts movements and poses"},{id:"cinematic_lighting",name:"Cinematic Lighting",description:"Professional movie-style lighting effects"},{id:"special_effects_v1",name:"Special Effects V1",description:"High-quality VFX and particle effects"}];function D(e){let{onSelect:a}=e,[t,i]=(0,r.useState)(""),l=R.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()));return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(A.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,s.jsx)("input",{type:"text",placeholder:"Search LoRAs...",className:"w-full pl-9 pr-3 py-2 rounded-md border bg-card text-card-foreground",value:t,onChange:e=>i(e.target.value)})]}),(0,s.jsxs)(m,{onValueChange:a,children:[(0,s.jsx)(f,{children:(0,s.jsx)(p,{placeholder:"Select a LoRA"})}),(0,s.jsx)(x,{children:l.map(e=>(0,s.jsxs)(h,{value:e.id,className:"flex flex-col items-start py-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.description})]},e.id))})]})]})}let P=[{id:"mm_sd_v15",name:"SD 1.5 Motion Module",description:"Standard motion module for Stable Diffusion 1.5"},{id:"mm_sdxl",name:"SDXL Motion Module",description:"Enhanced motion module for SDXL"},{id:"mm_ad_v3",name:"AnimateDiff v3 Module",description:"Latest AnimateDiff motion module"}],I=[{value:"sd15",label:"SD 1.5"},{value:"sdxl",label:"SDXL"},{value:"animatediff_v3",label:"AnimateDiff v3"}],T=[{value:"gif",label:"GIF"},{value:"mp4",label:"MP4"}];var F=t(7493);let U={RUNPOD_API_KEY:F.env.RUNPOD_API_KEY,RUNPOD_ENDPOINT_URL:F.env.RUNPOD_ENDPOINT_URL,RUNPOD_WEBHOOK_URL:F.env.RUNPOD_WEBHOOK_URL,MAX_FILE_SIZE:10485760,ALLOWED_FILE_TYPES:["image/jpeg","image/png","image/gif","video/mp4"],POLL_INTERVAL:2e3,MAX_POLL_TIME:3e5};var M=t(6117);function V(){let[e,a]=(0,r.useState)(I[0].value),[t,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(null),[u,g]=(0,r.useState)(30),[y,j]=(0,r.useState)(P[0].id),[N,w]=(0,r.useState)(T[0].value),[_,E]=(0,r.useState)(null),{status:L,result:C,error:O}=function(e){let[a,t]=(0,r.useState)(null),[s,i]=(0,r.useState)(null),[l,n]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let a;if(!e)return;let s=0,r=async()=>{try{var a,s;let r=await fetch("/api/status/".concat(e)),l=await r.json();if(t(l.status),"COMPLETED"===l.status&&(null===(a=l.output)||void 0===a?void 0:a.url))return i(l.output.url),!0;if("FAILED"===l.status)return n((null===(s=l.output)||void 0===s?void 0:s.error)||"Generation failed"),!0;return!1}catch(e){return n("Failed to check job status"),!0}},l=async()=>{let e=await r();!e&&s<U.MAX_POLL_TIME?(a=setTimeout(l,U.POLL_INTERVAL),s+=U.POLL_INTERVAL):e||n("Generation timed out")};return l(),()=>{clearTimeout(a)}},[e]),{status:a,result:s,error:l}}(_),A="PENDING"===L||"IN_PROGRESS"===L,R=async()=>{if(!n.trim()){M.A.error("Please enter a prompt");return}try{let a=new FormData;a.append("prompt",n),a.append("model",e),a.append("motionModule",y),a.append("frames",u.toString()),a.append("outputType",N),t&&a.append("lora",t),d&&a.append("file",d);let s=await fetch("/api/generate",{method:"POST",body:a}),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to start generation");E(r.id)}catch(e){M.A.error(e instanceof Error?e.message:"Failed to generate scene")}},F=async()=>{M.A.promise(fetch("/api/upscale",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:C})}).then(e=>{if(!e.ok)throw Error("Failed to upscale");return e.json()}),{loading:"Upscaling...",success:"Upscaled successfully",error:"Failed to upscale"})},V=async()=>{M.A.promise(fetch("/api/inpaint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:C})}).then(e=>{if(!e.ok)throw Error("Failed to inpaint");return e.json()}),{loading:"Inpainting...",success:"Inpainting completed",error:"Failed to inpaint"})},Z=async()=>{M.A.promise(fetch("/api/edit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:C})}).then(e=>{if(!e.ok)throw Error("Failed to edit");return e.json()}),{loading:"Editing...",success:"Edit completed",error:"Failed to edit"})};return O&&M.A.error(O),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-primary mb-4",children:"Cinematic AI Generator"}),(0,s.jsx)("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Create stunning AI-generated action scenes with our advanced tools"})]}),(0,s.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,s.jsxs)(i.E.div,{className:"space-y-6 bg-card rounded-lg p-6 shadow-lg border border-border",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-primary",children:"Model"}),(0,s.jsxs)(m,{value:e,onValueChange:a,children:[(0,s.jsx)(f,{children:(0,s.jsx)(p,{placeholder:"Select a model"})}),(0,s.jsx)(x,{children:I.map(e=>(0,s.jsx)(h,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-primary",children:"LoRA Selection"}),(0,s.jsx)(D,{onSelect:l})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-primary",children:"Scene Description"}),(0,s.jsx)("textarea",{value:n,onChange:e=>o(e.target.value),className:"w-full min-h-[120px] p-3 rounded-md border bg-card text-card-foreground",placeholder:"Describe your action scene...",maxLength:500}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground text-right",children:[n.length,"/500 characters"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-primary",children:"Upload Reference"}),(0,s.jsx)(S,{onFileSelect:c})]})]}),(0,s.jsxs)(i.E.div,{className:"space-y-6 bg-card rounded-lg p-6 shadow-lg border border-border",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-primary",children:"Number of Frames"}),(0,s.jsx)(v,{value:[u],onValueChange:e=>{let[a]=e;return g(a)},max:120,min:15,step:1}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[u," frames"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-primary",children:"Motion Module"}),(0,s.jsxs)(m,{value:y,onValueChange:j,children:[(0,s.jsx)(f,{children:(0,s.jsx)(p,{placeholder:"Select a motion module"})}),(0,s.jsx)(x,{children:P.map(e=>(0,s.jsx)(h,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-primary",children:"Output Type"}),(0,s.jsxs)(m,{value:N,onValueChange:w,children:[(0,s.jsx)(f,{children:(0,s.jsx)(p,{placeholder:"Select output type"})}),(0,s.jsx)(x,{children:T.map(e=>(0,s.jsx)(h,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsx)(b,{onClick:R,disabled:A,className:"w-full bg-primary hover:bg-primary/90",children:A?"Generating...":"Generate Scene"})]})]}),(0,s.jsx)(i.E.div,{className:"mt-8",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:(0,s.jsx)(k,{isLoading:A,result:C,resultType:"gif"===N?"image":"video",onUpscale:F,onInpaint:V,onEdit:Z})})]})})}}},function(e){e.O(0,[160,127,427,275,744],function(){return e(e.s=3202)}),_N_E=e.O()}]);